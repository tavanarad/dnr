(this["webpackJsonplightbar-redux"]=this["webpackJsonplightbar-redux"]||[]).push([[0],{221:function(e,t,a){e.exports=a(449)},226:function(e,t,a){},448:function(e,t,a){},449:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(16),o=a.n(r),c=a(503),i=(a(226),a(481)),s=a(63),u=a(490),d=a(491),m=a(52),h=a(492),f=a(452),g=a(450),b=a(484),p=a(485),v=[{model:"SL-24",front:2,rear:2},{model:"SL-30",front:3,rear:3},{model:"SL-36",front:4,rear:4},{model:"SL-42",front:5,rear:5},{model:"SL-48",front:6,rear:6},{model:"SL-54",front:7,rear:7},{model:"SL-60",front:8,rear:8},{model:"SL-66",front:9,rear:9},{model:"SL-72",front:10,rear:10},{model:"SL-78",front:11,rear:11},{model:"SL-84",front:12,rear:12},{model:"SL-90",front:13,rear:13},{model:"SL-96",front:14,rear:14}],x=[{title:"Amber",schema:["#FFBF00","#000000"]},{title:"Red",schema:["#FF0000","#000000"]},{title:"Green",schema:["#00FF00","#000000"]},{title:"Blue",schema:["#0000FF","#000000"]},{title:"Amber, Red",schema:["#FFBF00","#FF0000","#000000"]},{title:"Amber, Green",schema:["#FFBF00","#00FF00","#000000"]},{title:"Amber, Blue",schema:["#FFBF00","#0000FF","#000000"]},{title:"Red, Green",schema:["#FF0000","#00FF00","#000000"]},{title:"Red, Blue",schema:["#FF0000","#0000FF","#000000"]},{title:"Green, Blue",schema:["#00FF00","#0000FF","#000000"]},{title:"Amber, Red, Green",schema:["#FFBF00","#FF0000","#00FF00","#000000"]},{title:"Amber, Red, Blue",schema:["#FFBF00","#FF0000","#0000FF","#000000"]},{title:"Amber, Green, Blue",schema:["#FFBF00","#00FF00","#0000FF","#000000"]},{title:"Amber, Red, Green, Blue",schema:["#FFBF00","#FF0000","#00FF00","#0000FF","#000000"]},{title:"Full Color (RGB)",schema:[]}],E=a(59),y=Object(E.b)({name:"lightbarSelector",initialState:{selectedModel:null,selectedColorSchema:null,hasGreen:!1},reducers:{selectLightbar:function(e,t){e.selectedModel=t.payload},selectColorSchema:function(e,t){e.selectedColorSchema=t.payload},setHasGreen:function(e,t){e.hasGreen=t.payload}}}),C=y.actions,w=C.selectLightbar,j=C.selectColorSchema,F=(C.setHasGreen,function(e){return e.lightbarSelector.selectedModel}),S=function(e){return e.lightbarSelector.selectedColorSchema},O=function(e){return e.lightbarSelector.hasGreen},k=y.reducer,N=a(11),B=Object(i.a)({list:{border:"solid 1px lightgray",borderRadius:3,marginTop:10,marginBottom:10,maxHeight:150,overflow:"auto"}}),L=function(e){var t=e.onClick,a=e.selected,n=void 0===a?null:a;return v.map((function(e){return l.a.createElement(g.a,{selected:(null===n||void 0===n?void 0:n.model)===e.model,key:e.model,onClick:function(){return t(e)},button:!0},l.a.createElement(b.a,{primary:e.model,secondary:"Front ".concat(e.front," / Rear ").concat(e.rear)}))}))};var R=function(){var e=B(),t=Object(N.c)(F);console.log(t);var a=Object(N.b)();return l.a.createElement(p.a,{className:e.list},l.a.createElement(L,{onClick:function(e){return a(w(e))},selected:t}))},z=a(5),D=a(507),P=a(504),I=a(489),A=a(113),W=Object(i.a)((function(e){return{select:{width:"100%",marginTop:e.spacing(2)},switch:{marginTop:e.spacing(2)}}}));Object(z.a)({switchBase:{color:A.a[300],"&$checked":{color:A.a[500]},"&$checked + $track":{backgroundColor:A.a[500]}},checked:{},track:{}})(D.a);var G=function(){var e=W(),t=Object(N.b)(),a=Object(N.c)(S);return Object(N.c)(O),l.a.createElement(l.a.Fragment,null,l.a.createElement(P.a,{value:a||"",onChange:function(e){return t(j(e.target.value))},displayEmpty:!0,className:e.select,inputProps:{"aria-label":"Without label"}},l.a.createElement(I.a,{value:null},l.a.createElement("em",null,"---")),x.map((function(e){return l.a.createElement(I.a,{key:e.title,value:e},e.title)}))))},H=Object(i.a)({root:{display:"flex",flexDirection:"row",alignContent:"stretch",justifyContent:"center",minHeight:400,marginTop:20},card:{width:500},subtitle:{fontSize:14},button:{justifyContent:"flex-end"}});function T(){var e=H(),t=Object(s.g)(),a=Object(N.c)(F),n=Object(N.c)(S);return l.a.createElement("div",{className:e.root},l.a.createElement(u.a,{className:e.card},l.a.createElement(d.a,null,l.a.createElement(m.a,{variant:"h6"},"Lightbars"),l.a.createElement(m.a,{className:e.subtitle},"Select a lightbar model to configure"),l.a.createElement(R,null),l.a.createElement(m.a,{variant:"h6"},"Color Schema"),l.a.createElement(m.a,{className:e.subtitle},"Select the color schema of the lightbar"),l.a.createElement(G,null)),l.a.createElement(h.a,{className:e.button},l.a.createElement(f.a,{color:"primary",disabled:!a||!n,variant:"contained",onClick:function(){return t.push("/lightbar")}},"Start Configurator"))))}var M=a(27),V=a(493),$=a(494),J=a(486),U=a(214),q=a(206),Y=a.n(q),K=a(204),Q=a.n(K),X=a(205),Z=a.n(X),_=a(32),ee=a(37),te=a(203),ae=a.n(te),ne=function(e){return Object.values(e).map((function(e){return function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}(e)})).join("")},le=function(e){if(!e||!e.length)return null;var t=e[0].lights.length,a=3+e.length*t*3,n=new ArrayBuffer(a),l=new DataView(n);l.setUint8(0,t),l.setUint16(1,e.length);var r=3;return e.forEach((function(e){return e.lights.forEach((function(e){return[(e.color.r*e.color.a).toFixed(0),(e.color.g*e.color.a).toFixed(0),(e.color.b*e.color.a).toFixed(0)].forEach((function(e){return l.setUint8(r++,e)}))}))})),new Blob([l.buffer],{type:"application/octet-stream"})},re={lightbar:null,cycles:[],selectedCycle:0,selectedLight:0,showPreview:!1,latestSelectedColor:null},oe=Object(E.b)({name:"lightbar",initialState:re,reducers:{setLightbar:function(e,t){return Object(_.a)({},re,{lightbar:t.payload})},setSelectedCycle:function(e,t){e.selectedCycle=t.payload},setSelectedLight:function(e,t){e.latestSelectedColor&&(e.cycles[e.selectedCycle].lights[t.payload].color=e.latestSelectedColor),e.selectedLight=t.payload},addCycle:function(e,t){var a;e.cycles.push({lights:t.payload||(a=e.lightbar,Object(ee.a)(Array(a.front+a.rear+6).keys()).map((function(e){return{color:{r:0,g:0,b:0,a:1}}})))}),e.selectedCycle=e.cycles.length-1},duplicateCycle:function(e){e.cycles.push(e.cycles[e.selectedCycle]),e.selectedCycle=e.cycles.length-1},deleteCycle:function(e,t){e.cycles.splice(t.payload,1)},setLightSetting:function(e,t){e.cycles[e.selectedCycle].lights[e.selectedLight]=t.payload,e.latestSelectedColor=t.payload.color},setInitialState:function(e){re},setShowPreview:function(e,t){e.showPreview=t.payload},saveAsFile:function(e,t){var a,n=t.payload?[(a={lightbar:e.lightbar,cycles:e.cycles},new Blob([JSON.stringify(a)],{type:"application/json"})),"json"]:[le(e.cycles),"bin"],l=Object(M.a)(n,2),r=l[0],o=l[1];!function(e,t){ae.a.saveAs(e,t)}(r,"".concat(e.lightbar.model,"-").concat((new Date).getTime(),".").concat(o))}}}),ce=oe.actions,ie=ce.setLightbar,se=ce.setSelectedCycle,ue=ce.setSelectedLight,de=ce.addCycle,me=ce.duplicateCycle,he=ce.deleteCycle,fe=ce.setLightSetting,ge=(ce.setInitialState,ce.setShowPreview),be=ce.saveAsFile,pe=function(e){return e.lightbar.cycles},ve=function(e){return e.lightbar.selectedCycle},xe=function(e){return e.lightbar.selectedLight},Ee=function(e){return e.lightbar.showPreview},ye=oe.reducer,Ce=Object(i.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},previewButton:{color:"#ffffff",borderColor:"#ffffff"}}}));var we=function(){var e=Ce(),t=Object(s.h)(),a=Object(s.g)(),r=Object(n.useState)(!1),o=Object(M.a)(r,2),c=o[0],i=o[1],u=l.a.useState(null),d=Object(M.a)(u,2),h=d[0],g=d[1],b=Object(N.b)(),p=function(e){return function(){null!==e&&b(be(e)),g(null)}};return Object(n.useEffect)((function(){console.log(t),t.pathname.search(/lightbar$/)>0?i(!0):i(!1)}),[t]),l.a.createElement(V.a,{position:"static"},l.a.createElement($.a,null,l.a.createElement(J.a,{edge:"start",color:"inherit","aria-label":"Menu",onClick:function(){return a.replace("/")}},l.a.createElement(Q.a,null)),l.a.createElement(m.a,{variant:"h6",className:e.title},"DandR Electronic Lighbar Configurator"),c&&l.a.createElement(l.a.Fragment,null,l.a.createElement(f.a,{className:e.previewButton,onClick:function(){return b(ge(!0))},startIcon:l.a.createElement(Z.a,null),variant:"outlined"},"Preview"),l.a.createElement(J.a,{"aria-label":"Download",color:"inherit",edge:"end",onClick:function(e){return g(e.currentTarget)}},l.a.createElement(Y.a,null))),l.a.createElement(U.a,{id:"simple-menu",anchorEl:h,keepMounted:!0,open:Boolean(h),onClose:p()},l.a.createElement(I.a,{onClick:p(!1)},"Export BIN"),l.a.createElement(I.a,{onClick:p(!0)},"Export JSON"))))},je=(a(153),a(31)),Fe=a(28),Se=Object(i.a)({root:{display:"flex",flexDirection:"row",height:function(e){return e.width?"auto":200},justifyContent:"center",marginLeft:10,maxWidth:750,minWidth:function(e){return e.width||500},width:function(e){return e.width||"100%"}}});var Oe=function(e){var t,a=e.lights,r=void 0===a?[]:a,o=e.onClick,c=e.selectedLight,i=(e.title,e.width),s=Se({width:i}),u=Object(n.useRef)();if(!r.length)return null;var d=r.slice(0,(r.length-6)/2),m=r.slice(d.length+3,-3),h=114+45*d.length,f=(i||h)/h,g=d.length*(45*f),b=5*f,p=function(e){return function(){return o&&o(e)}},v=function(e){return c===e?"red":null},x=function(e){var t=e.r,a=e.g,n=e.b,l=e.a;return"#".concat(ne({r:(t*l).toFixed(0),g:(a*l).toFixed(0),b:(n*l).toFixed(0)}))};return l.a.createElement("div",{ref:u,className:s.root},l.a.createElement(Fe.Stage,{width:h*f,height:200*f},l.a.createElement(Fe.Layer,{x:57*f},d.map((function(e,t){return l.a.createElement(Fe.Rect,{key:t,x:45*t*f,y:20*f,width:40*f,height:24*f,fill:x(e.color),shadowBlur:b,cornerRadius:5,onClick:p(t),stroke:v(t)})}))),l.a.createElement(Fe.Layer,{rotation:-180,x:114*f+g,y:184*f},l.a.createElement(Fe.Rect,{x:58*f,y:44*f,width:40*f,height:24*f,fill:x(r[d.length+2].color),shadowBlur:b,rotation:135,cornerRadius:5,onClick:p(d.length+2),stroke:v(d.length+2)}),l.a.createElement(Fe.Rect,(t={x:30*f,y:73*f,width:40*f,height:24*f,fill:x(r[d.length+1].color),shadowBlur:b},Object(je.a)(t,"shadowBlur",b),Object(je.a)(t,"rotation",90),Object(je.a)(t,"cornerRadius",5),Object(je.a)(t,"onClick",p(d.length+1)),Object(je.a)(t,"stroke",v(d.length+1)),t)),l.a.createElement(Fe.Rect,{x:30*f,y:113*f,width:40*f,height:24*f,fill:x(r[d.length].color),shadowBlur:b,rotation:45,cornerRadius:5,onClick:p(d.length),stroke:v(d.length)})),l.a.createElement(Fe.Layer,{x:57*f},m.map((function(e,t){return l.a.createElement(Fe.Rect,{key:t,x:45*t*f,y:140*f,width:40*f,height:24*f,fill:x(r[r.length-4-t].color),shadowBlur:b,cornerRadius:5,onClick:p(r.length-4-t),stroke:v(r.length-4-t)})}))),l.a.createElement(Fe.Layer,null,l.a.createElement(Fe.Rect,{x:55*f,y:44*f,width:40*f,height:24*f,fill:x(r[r.length-1].color),shadowBlur:b,rotation:135,cornerRadius:5,onClick:p(r.length-1),stroke:v(r.length-1)}),l.a.createElement(Fe.Rect,{x:27*f,y:73*f,width:40*f,height:24*f,fill:x(r[r.length-2].color),shadowBlur:b,rotation:90,cornerRadius:5,onClick:p(r.length-2),stroke:v(r.length-2)}),l.a.createElement(Fe.Rect,{x:27*f,y:113*f,width:40*f,height:24*f,fill:x(r[r.length-3].color),shadowBlur:b,rotation:45,cornerRadius:5,onClick:p(r.length-3),stroke:v(r.length-3)}))))},ke=a(57),Ne=a(495),Be=a(506),Le=a(496),Re=a(497),ze=Object(i.a)({});var De=function(){ze();var e=Object(ke.a)(),t=Object(n.useState)(!1),a=Object(M.a)(t,2),r=(a[0],a[1],Object(Ne.a)(e.breakpoints.down("sm"))),o=Object(N.c)(Ee),c=Object(N.c)(pe),i=Object(N.b)(),s=Object(n.useState)(0),u=Object(M.a)(s,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){var e=setInterval((function(){m(d+1<c.length?d+1:0)}),50);return function(){return clearInterval(e)}})),l.a.createElement("div",null,l.a.createElement(Be.a,{fullScreen:r,open:o,onClose:function(){return i(ge(!1))},"aria-labelledby":"responsive-dialog-title"},l.a.createElement(Le.a,{id:"responsive-dialog-title"},"Lightbar Preview"),l.a.createElement(Re.a,null,c&&c[d]&&l.a.createElement(Oe,{lights:c[d].lights}))))},Pe=a(498),Ie=a(509),Ae=a(112),We=a(111),Ge=a(7),He=a.n(Ge),Te=a(48),Me=a.n(Te),Ve=a(34),$e=a.n(Ve),Je=a(39),Ue=a.n(Je),qe=a(14),Ye=function(e){var t=e.onChange,a=e.onSwatchHover,n=(e.hex,e.colors),r=e.width,o=e.triangle,c=e.styles,i=void 0===c?{}:c,s=e.className,u=void 0===s?"":s,d=He()($e()({default:{card:{width:r,background:"#fff",border:"0 solid rgba(0,0,0,0.25)",boxShadow:"0 1px 4px rgba(0,0,0,0.25)",borderRadius:"4px",position:"relative"},body:{padding:"15px 9px 9px 15px",height:40},label:{fontSize:"18px",color:"#fff"},triangle:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent #fff transparent",position:"absolute"},triangleShadow:{width:"0px",height:"0px",borderStyle:"solid",borderWidth:"0 9px 10px 9px",borderColor:"transparent transparent rgba(0,0,0,.1) transparent",position:"absolute"},hash:{background:"#F0F0F0",height:"30px",width:"30px",borderRadius:"4px 0 0 4px",float:"left",color:"#98A1A4",display:"flex",alignItems:"center",justifyContent:"center"},input:{width:"100px",fontSize:"14px",color:"#666",border:"0px",outline:"none",height:"28px",boxShadow:"inset 0 0 0 1px #F0F0F0",boxSizing:"content-box",borderRadius:"0 4px 4px 0",float:"left",paddingLeft:"8px"},swatch:{width:"30px",height:"30px",float:"left",borderRadius:"4px",margin:"0 6px 6px 0"},clear:{clear:"both"}},"hide-triangle":{triangle:{display:"none"},triangleShadow:{display:"none"}},"top-left-triangle":{triangle:{top:"-10px",left:"12px"},triangleShadow:{top:"-11px",left:"12px"}},"top-right-triangle":{triangle:{top:"-10px",right:"12px"},triangleShadow:{top:"-11px",right:"12px"}}},i),{"hide-triangle":"hide"===o,"top-left-triangle":"top-left"===o,"top-right-triangle":"top-right"===o}),m=function(e,a){Ue.a.isValidHex(e)&&t({hex:e,source:"hex"},a)};return l.a.createElement("div",{style:d.card,className:"twitter-picker ".concat(u)},l.a.createElement("div",{style:d.triangleShadow}),l.a.createElement("div",{style:d.triangle}),l.a.createElement("div",{style:d.body},Me()(n,(function(e,t){return l.a.createElement(qe.Swatch,{key:t,color:e,hex:e,style:d.swatch,onClick:m,onHover:a,focusStyle:{boxShadow:"0 0 4px ".concat(e)}})}))))};Ye.defaultProps={width:276,colors:["#FF6900","#FCB900","#7BDCB5","#00D084","#8ED1FC","#0693E3","#ABB8C3","#EB144C","#F78DA7","#9900EF"],triangle:"top-left",styles:{}};var Ke=Object(qe.ColorWrap)(Ye),Qe=Object(i.a)({root:{position:"fixed",margin:"-50px 40px",zIndex:2,backgroundColor:"white"},pallete:{backgroundColor:"white",position:"absolute",zIndex:"2"},innerPallete:{position:"fixed",top:0,right:0,bottom:0,left:0}}),Xe=function(e){var t=e.colors,a=e.value,n=e.onClick,r=e.onChange,o=Qe({colors:t});return l.a.createElement("div",{className:o.root},l.a.createElement("div",{className:o.pallete},l.a.createElement("div",{className:o.innerPallete,onClick:n}),(null===t||void 0===t?void 0:t.length)?l.a.createElement(Ke,{colors:t,hex:!1,triangle:"hide",onChange:r}):l.a.createElement(We.SketchPicker,{presetColors:["#FFBF00","#FF0000","#00FF00","#0000FF","#000000"],color:a,onChange:r,disableAlpha:!0})))},Ze=Object(i.a)({root:{minWidth:400,maxWidth:500},card:{},cardHeader:{color:"#ffffff",backgroundColor:Ae.a[500]},cardContent:{},colorInfo:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},colorView:{width:25,height:25,backgroundColor:function(e){return"rgb(".concat(Object.values(e.color),")")}}});var _e=function(e){var t=e.colors,a=e.config,r=e.onChange,o=Ze({color:(null===a||void 0===a?void 0:a.color)||{r:255,g:255,b:255}}),c=Object(n.useState)(!1),i=Object(M.a)(c,2),s=i[0],h=i[1],g=function(e){var t=e.target;console.log(t.value),r({color:Object(_.a)({},null===a||void 0===a?void 0:a.color,Object(je.a)({},t.name,+t.value>=0&&+t.value<=255?t.value.trim():null===a||void 0===a?void 0:a.color[t.name]))})},b=function(){return h(!s)};return l.a.createElement("div",{className:o.root},l.a.createElement(u.a,{className:o.card},l.a.createElement(Pe.a,{className:o.cardHeader,title:"Set the color"}),l.a.createElement(d.a,{className:o.cardContent},a?l.a.createElement("div",{className:o.colorInfo},t.length?l.a.createElement(We.AlphaPicker,{color:a.color,onChange:function(e){console.log(e),r({color:e.rgb})},width:280}):l.a.createElement(l.a.Fragment,null,l.a.createElement(Ie.a,{label:"Red",inputProps:{max:255,min:0},name:"r",onChange:g,size:"small",type:"number",value:a.color?a.color.r:255,variant:"outlined"}),l.a.createElement(Ie.a,{label:"Green",inputProps:{max:255,min:0},name:"g",onChange:g,size:"small",type:"number",value:a.color?a.color.g:255,variant:"outlined"}),l.a.createElement(Ie.a,{label:"Blue",inputProps:{max:255,min:0},name:"b",onChange:g,size:"small",type:"number",value:a.color?a.color.b:255,variant:"outlined"})),l.a.createElement(f.a,{color:"default",onClick:b,variant:"contained"},l.a.createElement("span",{className:o.colorView})),s&&l.a.createElement(Xe,{colors:t,onClick:b,onChange:function(e){return r({color:e.rgb})},value:null===a||void 0===a?void 0:a.color})):l.a.createElement(m.a,{variant:"h6"},"Please select a light module from the lightbar preview to set the color."))))},et=a(209),tt=a.n(et),at=a(208),nt=a.n(at),lt=a(500),rt=a(207),ot=a.n(rt),ct=Object(i.a)({root:{width:"100%",overflow:"auto",maxHeight:400},item:{height:75}}),it=function(e){var t=e.className,a=e.id,n=e.lights,r=e.onClick,o=e.onDelete,c=e.selected;return l.a.createElement(g.a,{alignItems:"center",className:t,selected:c,onClick:r,button:!0},l.a.createElement(b.a,{primary:"Cycle #".concat(a+1)}),l.a.createElement(Oe,{lights:n,width:10*(n.length-6)}),l.a.createElement(lt.a,null,l.a.createElement(J.a,{"arial-label":"delete",edge:"end",onClick:o},l.a.createElement(ot.a,null))))};var st=function(){var e=ct(),t=Object(N.c)(pe),a=Object(N.c)(ve),n=Object(N.b)(),r=function(e){return function(){return n(he(e))}};return l.a.createElement(p.a,{className:e.root},t.map((function(t,o){return l.a.createElement(it,{className:e.item,key:o,id:o,lights:t.lights,onClick:(c=o,function(){return n(se(c))}),onDelete:r(o),selected:o===a});var c})))},ut=Object(i.a)({action:{color:"#ffffff"},card:{},cardHeader:{color:"#ffffff",backgroundColor:Ae.a[500]},root:{}});var dt=function(){var e=ut(),t=Object(N.b)();return l.a.createElement("div",{className:e.root},l.a.createElement(u.a,{className:e.card},l.a.createElement(Pe.a,{className:e.cardHeader,action:l.a.createElement(l.a.Fragment,null,l.a.createElement(J.a,{"arial-label":"Add a new cycle",className:e.action,onClick:function(){return t(me())}},l.a.createElement(nt.a,null)),l.a.createElement(J.a,{"arial-label":"Add a new cycle",className:e.action,onClick:function(){return t(de())}},l.a.createElement(tt.a,null))),title:"Cycles"}),l.a.createElement(d.a,null,l.a.createElement(st,null))))},mt=Object(i.a)({root:{display:"flex",flexDirection:"row",marginTop:20,padding:"0 16px",alignContent:"space-between",flexWrap:function(e){return e.mqMatches?null:"wrap-reverse"}},cycles:{minWidth:400,flexGrow:1,bottom:0},details:{flexGrow:2,display:"flex",flexDirection:"column",alignItems:"center",alignContent:"stretch",padding:"0 10px"}});var ht=function(){var e,t,a=Object(Ne.a)("(min-width: 800px)"),r=mt({mqMatches:a}),o=Object(N.b)(),c=Object(N.c)(F),i=Object(N.c)(ve),u=Object(N.c)(xe),d=Object(N.c)(pe),m=Object(N.c)(F),h=Object(N.c)(Ee),f=Object(N.c)(S);return Object(n.useEffect)((function(){o(ie(c))}),[]),Object(n.useEffect)((function(){m&&o(de())}),[m]),c?(console.log(i),l.a.createElement(l.a.Fragment,null,!!m&&l.a.createElement("div",{className:r.root},l.a.createElement("div",{className:r.cycles},l.a.createElement(dt,null)),l.a.createElement("div",{className:r.details},l.a.createElement(Oe,{lights:null===(e=d[i])||void 0===e?void 0:e.lights,onClick:function(e){return o(ue(e))},selectedLight:u,title:c.model}),l.a.createElement(_e,{config:null===(t=d[i])||void 0===t?void 0:t.lights[u],colors:f.schema,onChange:function(e){return o(fe(e))}}))),h&&l.a.createElement(De,null))):l.a.createElement(s.a,{to:"/"})},ft=a(501),gt=(a(442),a(211)),bt=a.n(gt),pt=a(4),vt=(a(445),Object(i.a)({root:{backgroundColor:function(e){return e.backgroundColor||"#565656"},borderRadius:4,borderColor:"#333",display:"inline-block",padding:5,margin:5}}));var xt=function(e){var t=e.backgroundColor,a=e.column,n=(e.hasGlow,e.pixelColor,e.pixelCornerRadius),r=e.pixelSize,o=void 0===r?10:r,c=e.pixelStatus,i=void 0===c?[]:c,s=e.row,u=e.scrollSpeed,d=void 0===u?1e3:u,m=e.space,h=void 0===m?2:m,f=vt({backgroundColor:t}),g=window.innerWidth-100<(o+h)*a?(window.innerWidth-100)/((o+h)*a):1,b=(o+h)*g,p=l.a.useState(0),v=Object(M.a)(p,2),x=(v[0],v[1]);l.a.useEffect((function(){var e=0;return i[0].pixels.length>a&&(i[0].pixels=[].concat(Object(ee.a)(i[0].pixels),Object(ee.a)(new Array(a).keys()))),i.forEach((function(t,n){t.pixels.length&&t.pixels.length>a&&(t.pixels=Object(ee.a)(t.pixels),e=setInterval((function(){i[n].pixels.push(i[n].pixels.shift()),x((function(e){return e+1}))}),d))})),function(){e&&clearInterval(e)}}),[i]);var E=function(e,t){var a="rgba(0, 0, 0, 0.1)";return i.forEach((function(n){t>=n.x&&e>=n.y&&n.pixels[t-n.x]&&n.pixels[t-n.x][e]&&"000"!==n.pixels[t-n.x][e].join("")&&(a="rgba(".concat(n.pixels[t-n.x][e],")"))})),a};return l.a.createElement("div",{className:f.root},l.a.createElement(Fe.Stage,{width:b*a,height:b*s},l.a.createElement(Fe.Layer,{x:0,y:0},Object(ee.a)(Array(s).keys()).map((function(e){return Object(ee.a)(Array(a).keys()).map((function(t){return l.a.createElement(Fe.Rect,{key:"".concat(e,"-").concat(t),cornerRadius:n||0,fill:E(e,t),x:h+b*t,y:h+b*e,width:o*g,height:o*g})}))})).flat())))},Et=function(e,t){if(!e||""===e.trim())return[];var a=document.createElement("canvas"),n=Object(_.a)({},{fontFamily:"Open Sans",fontSize:14,fontStyle:"bold",textColor:"#00ff00",backgroundColor:"rgba(0, 0, 0)"},{},t),l="".concat(n.fontStyle," ").concat(n.fontSize,"px ").concat(n.fontFamily);console.log(l),a.width=function(e,t){var a=document.createElement("canvas").getContext("2d");return a.font=t,a.measureText(e).width}(e,l).toFixed(0),a.height=16;var r=a.getContext("2d");return r.textBaseline="middle",r.fillStyle=n.backgroundColor,r.fillRect(0,0,a.width,a.height),r.font=l,r.fillStyle=n.textColor,r.fillText(e,0,8),function(e){var t=[];console.log(e.data);for(var a=0;a<e.width;a+=1){for(var n=[],l=0;l<e.height;l+=1){var r=l*e.width*4+4*a;n.push([e.data[r]<100?0:e.data[r],e.data[r+1]<100?0:e.data[r+1],e.data[r+2]<100?0:e.data[r+2]])}t.push(n)}return console.log(t),t}(r.getImageData(0,0,a.width,a.height))},yt=Object(E.b)({name:"scrollingBoard",initialState:{column:46,firstLine:"Hello World \u26d4 \u0633\u0644\u0627\u0645 \u062f\u0646\u06cc\u0627 \ud83d\ude01",imageData:Et("Hello World \u26d4 \u0633\u0644\u0627\u0645 \u062f\u0646\u06cc\u0627 \ud83d\ude01"),ledColor:{r:0,g:255,b:0,a:1},pixelCornerRadius:0,pixelSize:10,row:16,secondLine:"Line 2",scrollSpeed:50,spaceBetweenPixels:null,style:null},reducers:{setColumn:function(e,t){e.column=t.payload},setImageData:function(e,t){e.imageData=t.payload},setFirstLine:function(e,t){e.firstLine=t.payload},setLedColor:function(e,t){e.ledColor=t.payload},setPixelCornerRadius:function(e,t){e.pixelCornerRadius=t.payload},setRow:function(e,t){e.row=t.payload},setSecondLine:function(e,t){e.secondLine=t.payload},setScrollSpeed:function(e,t){e.scrollSpeed=t.payload},setBoardState:function(e,t){return t.payload}}}),Ct=yt.actions,wt=(Ct.setColumn,Ct.setFirstLine,Ct.setImageData,Ct.setLedColor),jt=(Ct.setRow,Ct.setSecondLine,Ct.setScrollSpeed,Ct.setBoardState),Ft=function(e){return e.scrollingBoard},St=yt.reducer,Ot=a(499),kt=a(510),Nt=a(210),Bt=a.n(Nt),Lt=a(212),Rt=(a(447),Object(i.a)((function(e){return{emojiIcon:{fontSize:30},emojiPicker:{position:"absolute",zIndex:999},formControl:{margin:e.spacing(1),minWidth:120},toolbar:{flexWrap:"wrap",padding:"unset"}}}))),zt=function(e){var t=e.addEmoji,a=void 0===t?function(){return null}:t,n=e.className,r=e.fontFamily,o=void 0===r?"Open Sans":r,c=e.fontSize,i=void 0===c?14:c,s=e.fontStyle,u=void 0===s?"bold":s,d=e.onChange,m=void 0===d?function(){return null}:d,h=Rt(),f=l.a.useState({fontFamily:o,fontSize:i,fontStyle:u}),g=Object(M.a)(f,2),b=g[0],p=g[1],v=l.a.useState(!1),x=Object(M.a)(v,2),E=x[0],y=x[1],C=function(e){return function(t){p(Object(_.a)({},b,Object(je.a)({},e,t.target.value))),m(Object(_.a)({},b,Object(je.a)({},e,t.target.value)))}};return l.a.createElement($.a,{className:Object(pt.a)(h.toolbar,n)},l.a.createElement(Ot.a,{variant:"outlined",className:h.formControl},l.a.createElement(kt.a,{id:"font-family"},"Font"),l.a.createElement(P.a,{edge:"start",labelId:"font-family",label:"Font",onChange:C("fontFamily"),value:b.fontFamily},l.a.createElement(I.a,{value:"Roboto"},"Roboto"),l.a.createElement(I.a,{value:"Roboto Mono"},"Roboto Mono"),l.a.createElement(I.a,{value:"Open Sans"},"Open Sans"),l.a.createElement(I.a,{value:"Baloo Bhaina 2"},"Baloo Bhaina"),l.a.createElement(I.a,{value:"Montserrat"},"Montserrat"),l.a.createElement(I.a,{value:"Titillium Web"},"Titillium Web"),l.a.createElement(I.a,{value:"Cairo"},"Cairo"))),l.a.createElement(Ot.a,{variant:"outlined",className:h.formControl},l.a.createElement(kt.a,{id:"font-size"},"Size"),l.a.createElement(P.a,{labelId:"font-size",label:"Size",onChange:C("fontSize"),value:b.fontSize},l.a.createElement(I.a,{value:6}," 6 px"),l.a.createElement(I.a,{value:8}," 8 px"),l.a.createElement(I.a,{value:10}," 10 px"),l.a.createElement(I.a,{value:12}," 12 px"),l.a.createElement(I.a,{value:14}," 14 px"),l.a.createElement(I.a,{value:16}," 16 px"))),l.a.createElement(J.a,{"arial-label":"Emoji",onClick:function(){return y(!E)}},l.a.createElement(Bt.a,{className:h.emojiIcon})),E&&l.a.createElement("div",{className:h.emojiPicker},l.a.createElement(Lt.a,{onSelect:function(e){y(!1),a(e)},style:{width:"unset",maxWidth:345}})))},Dt=Object(i.a)({root:{alignItems:"center",display:"flex",flexDirection:"column"},matrixLCD:{marginTop:20,textAlign:"center"},card:{width:"60vw",marginTop:20},cardContent:{display:"flex",flexDirection:"column"},row:{alignItems:"center",display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",margin:"5px 0"},textField:{margin:"5px 5px"},text:{margin:"5px 5px","& input":{fontFamily:function(e){return e.style&&e.style.fontFamily||"Roboto"},fontSize:function(e){return e.style&&e.style.fontSize||16}}},fullwidth:{width:"100%"},colorView:{background:function(e){return"rgba(".concat(Object.values(e.ledColor),")")},height:25,width:25}});var Pt=function(){var e=Object(N.b)(),t=Object(N.c)(Ft),a=Dt(t),n=[{x:0,y:0,pixels:t.imageData}],r=l.a.useState(!1),o=Object(M.a)(r,2),c=o[0],i=o[1],s=l.a.useState(),m=Object(M.a)(s,2),h=m[0],g=m[1],b=function(){return i(!c)},p=function(a){return e(jt(Object(_.a)({},t,Object(je.a)({},a.target.name,+a.target.value))))};return l.a.createElement("div",{className:a.root},l.a.createElement("div",{className:a.matrixLCD},l.a.createElement(xt,{column:t.column,pixelColor:"rgba(".concat(Object.values(t.ledColor),")"),pixelCornerRadius:t.pixelCornerRadius,pixelStatus:n,scrollSpeed:t.scrollSpeed,row:t.row})),l.a.createElement(u.a,{className:a.card},l.a.createElement(Pe.a,{title:"Message Board Setting"}),l.a.createElement(d.a,{className:a.cardContent},l.a.createElement("div",{className:a.row},l.a.createElement(Ie.a,{className:a.textField,label:"Row",inputProps:{max:200,min:0},name:"row",onChange:p,size:"small",type:"number",value:t.row,variant:"outlined"}),l.a.createElement(bt.a,null),l.a.createElement(Ie.a,{className:a.textField,label:"Column",inputProps:{max:200,min:0},name:"column",onChange:p,size:"small",type:"number",value:t.column,variant:"outlined"}),l.a.createElement(Ie.a,{className:a.textField,label:"Pixel corner",inputProps:{max:360,min:0},name:"pixelCornerRadius",onChange:p,size:"small",type:"number",value:t.pixelCornerRadius,variant:"outlined"}),l.a.createElement(Ie.a,{className:a.textField,label:"Scroll Interval",inputProps:{max:1e3,min:0},InputProps:{endAdornment:l.a.createElement(ft.a,{position:"end"},"ms")},name:"scrollSpeed",onChange:p,size:"small",type:"number",value:t.scrollSpeed,variant:"outlined"})),l.a.createElement("div",{className:a.row},l.a.createElement(Ie.a,{className:a.textField,label:"Red",inputProps:{max:255,min:0},name:"red",onChange:p,size:"small",type:"number",value:t.ledColor.r,variant:"outlined",disabled:!0}),l.a.createElement(Ie.a,{className:a.textField,label:"Green",inputProps:{max:255,min:0},name:"green",onChange:p,size:"small",type:"number",value:t.ledColor.g,variant:"outlined",disabled:!0}),l.a.createElement(Ie.a,{className:a.textField,label:"Blue",inputProps:{max:255,min:0},name:"blue",onChange:p,size:"small",type:"number",value:t.ledColor.b,variant:"outlined",disabled:!0}),l.a.createElement(f.a,{color:"default",onClick:b,variant:"contained"},l.a.createElement("span",{className:a.colorView})),c&&l.a.createElement(Xe,{onClick:b,onChange:function(a){e(wt(a.rgb));var n=Object(_.a)({},t.style,{textColor:a.hex});e(jt(Object(_.a)({},t,{style:n,imageData:Et(t.firstLine,n)})))},value:t.ledColor})),l.a.createElement("div",{className:a.row},l.a.createElement(zt,{className:a.fullwidth,onChange:function(a){g(a),e(jt(Object(_.a)({},t,{style:a,imageData:Et(t.firstLine,a)})))},addEmoji:function(a){return e(jt(Object(_.a)({},t,{firstLine:"".concat(t.firstLine," ").concat(a.native),imageData:Et("".concat(t.firstLine," ").concat(a.native),h)})))}}),l.a.createElement(Ie.a,{className:Object(pt.a)([a.text,a.fullwidth]),label:"First Line",name:"firstLine",onChange:function(a){var n;e(jt(Object(_.a)({},t,(n={},Object(je.a)(n,a.target.name,a.target.value),Object(je.a)(n,"imageData",Et(a.target.value)),n))))},size:"small",type:"text",value:t.firstLine,variant:"outlined"})),l.a.createElement("canvas",{className:a.canvas,id:"hidden-canvas"},"Your browser doesn't support canvas"))))},It=(a(448),a(502)),At=Object(i.a)({root:{display:"flex",flexDirection:"row",justifyContent:"center",marginTop:20},card:{width:"60vw"},cardContent:{textAlign:"center"},button:{minHeight:60}});var Wt=function(){var e=At(),t=Object(s.g)(),a=function(e){return function(){return t.push(e)}};return l.a.createElement("div",{className:e.root},l.a.createElement(u.a,{className:e.card},l.a.createElement(Pe.a,{title:"Select The Device"}),l.a.createElement(d.a,{className:e.cardContent},l.a.createElement(It.a,{className:e.buttonGroup,orientation:"vertical",color:"primary"},l.a.createElement(f.a,{className:e.button,onClick:a("/lightbars")},"Lightbars Configurator"),l.a.createElement(f.a,{className:e.button,onClick:a("/message-board")},"Message Board Configurator")))))},Gt=Object(i.a)({root:{}});var Ht=function(){var e=Gt();return l.a.createElement("div",{className:e.root},l.a.createElement(we,null),l.a.createElement(s.d,null,l.a.createElement(s.b,{path:"/lightbars"},l.a.createElement(T,null)),l.a.createElement(s.b,{path:"/lightbar"},l.a.createElement(ht,null)),l.a.createElement(s.b,{path:"/message-board"},l.a.createElement(Pt,null)),l.a.createElement(s.b,{path:"/"},l.a.createElement(Wt,null))))},Tt=Object(E.a)({reducer:{lightbarSelector:k,lightbar:ye,scrollingBoard:St}}),Mt=a(213),Vt=Object(Mt.a)();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var $t=a(67);o.a.render(l.a.createElement(c.a,{theme:Vt},l.a.createElement(N.a,{store:Tt},l.a.createElement($t.a,{basename:"/"},l.a.createElement(Ht,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[221,1,2]]]);
//# sourceMappingURL=main.0417dc99.chunk.js.map