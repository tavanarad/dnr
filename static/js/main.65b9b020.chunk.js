(this["webpackJsonplightbar-redux"]=this["webpackJsonplightbar-redux"]||[]).push([[0],{201:function(e,t,n){e.exports=n(425)},206:function(e,t,n){},207:function(e,t,n){e.exports=n.p+"static/media/logo.8dad8028.svg"},212:function(e,t,n){},39:function(e,t,n){e.exports={row:"Counter_row__1C_4f",value:"Counter_value__1d0te",button:"Counter_button__1xpSV",textbox:"Counter_textbox__3ODaX",asyncButton:"Counter_asyncButton__2UAr3 Counter_button__1xpSV"}},425:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(14),o=n.n(l),c=n(472),i=(n(206),n(207),n(29)),u=n(12),s=n(43),d=Object(s.b)({name:"counter",initialState:{value:0},reducers:{increment:function(e){e.value+=1},decrement:function(e){e.value-=1},incrementByAmount:function(e,t){e.value+=t.payload}}}),m=d.actions;m.increment,m.decrement,m.incrementByAmount,d.reducer,n(39);n(212);var h=n(454),f=n(459),g=n(460),b=n(40),v=n(461),E=n(462),p=n(426),y=n(457),w=n(458),C=[{model:"SL-24",front:2,rear:2},{model:"SL-30",front:3,rear:3},{model:"SL-36",front:4,rear:4},{model:"SL-42",front:5,rear:5},{model:"SL-48",front:6,rear:6},{model:"SL-54",front:7,rear:7},{model:"SL-60",front:8,rear:8},{model:"SL-66",front:9,rear:9},{model:"SL-72",front:10,rear:10},{model:"SL-78",front:11,rear:11},{model:"SL-84",front:12,rear:12},{model:"SL-90",front:13,rear:13},{model:"SL-96",front:14,rear:14}],j=Object(s.b)({name:"lightbarSelector",initialState:{selectedModel:null},reducers:{selectLightbar:function(e,t){e.selectedModel=t.payload}}}),O=j.actions.selectLightbar,x=function(e){return e.lightbarSelector.selectedModel},k=j.reducer,S=Object(h.a)({list:{border:"solid 1px lightgray",borderRadius:3,marginTop:10,maxHeight:300,overflow:"auto"}}),L=function(e){var t=e.onClick,n=e.selected,a=void 0===n?null:n;return C.map((function(e){return r.a.createElement(p.a,{selected:(null===a||void 0===a?void 0:a.model)===e.model,key:e.model,onClick:function(){return t(e)},button:!0},r.a.createElement(y.a,{primary:e.model,secondary:"Front ".concat(e.front," / Rear ").concat(e.rear)}))}))};var N=function(){var e=S(),t=Object(u.c)(x);console.log(t);var n=Object(u.b)();return r.a.createElement(w.a,{className:e.list},r.a.createElement(L,{onClick:function(e){return n(O(e))},selected:t}))},B=n(47),R=Object(h.a)({root:{display:"flex",flexDirection:"row",alignContent:"stretch",justifyContent:"center",minHeight:400,marginTop:20},card:{width:500},subtitle:{fontSize:14},button:{justifyContent:"flex-end"}});function _(){var e=R(),t=Object(B.g)(),n=Object(u.c)(x);return r.a.createElement("div",{className:e.root},r.a.createElement(f.a,{className:e.card},r.a.createElement(g.a,null,r.a.createElement(b.a,{variant:"h6"},"Lightbars"),r.a.createElement(b.a,{className:e.subtitle},"Select a lightbar model to configure"),r.a.createElement(N,null)),r.a.createElement(v.a,{className:e.button},r.a.createElement(E.a,{color:"primary",disabled:!n,variant:"contained",onClick:function(){return t.push("/lightbar")}},"Start Configurator"))))}var I=n(463),D=n(464),P=n(465),A=n(194),W=n(466),H=n(186),M=n.n(H),z=n(188),F=n.n(z),T=n(187),V=n.n(T),G=n(92),J=n(193),U=n(185),q=n.n(U),X=function(e){return Object.values(e).map((function(e){return function(e){var t=Number(e).toString(16);return t.length<2&&(t="0"+t),t}(e)})).join("")},$=function(e){if(!e||!e.length)return null;var t=e[0].lights.length,n=3+e.length*t*3,a=new ArrayBuffer(n),r=new DataView(a);r.setUint16(0,e.length),r.setUint8(2,t);var l=3;return e.forEach((function(e){return e.lights.forEach((function(e){return Object.values(e.color).forEach((function(e){return r.setUint8(l++,e)}))}))})),new Blob([r.buffer],{type:"application/octet-stream"})},K={lightbar:null,cycles:[],selectedCycle:0,selectedLight:0,showPreview:!1},Q=Object(s.b)({name:"lightbar",initialState:K,reducers:{setLightbar:function(e,t){return Object(G.a)({},K,{lightbar:t.payload})},setSelectedCycle:function(e,t){e.selectedCycle=t.payload},setSelectedLight:function(e,t){e.selectedLight=t.payload},addCycle:function(e,t){var n;e.cycles.push({lights:t.payload||(n=e.lightbar,Object(J.a)(Array(n.front+n.rear+6).keys()).map((function(e){return{color:{r:255,g:255,b:255}}})))}),e.selectedCycle=e.cycles.length-1},deleteCycle:function(e,t){e.cycles.splice(t.payload,1)},setLightSetting:function(e,t){e.cycles[e.selectedCycle].lights[e.selectedLight]=t.payload},setInitialState:function(e){K},setShowPreview:function(e,t){e.showPreview=t.payload},saveAsFile:function(e,t){var n,a=t.payload?[(n={lightbar:e.lightbar,cycles:e.cycles},new Blob([JSON.stringify(n)],{type:"application/json"})),"json"]:[$(e.cycles),"bin"],r=Object(i.a)(a,2),l=r[0],o=r[1];!function(e,t){q.a.saveAs(e,t)}(l,"".concat(e.lightbar.model,"-").concat((new Date).getTime(),".").concat(o))}}}),Y=Q.actions,Z=Y.setLightbar,ee=Y.setSelectedCycle,te=Y.setSelectedLight,ne=Y.addCycle,ae=Y.deleteCycle,re=Y.setLightSetting,le=(Y.setInitialState,Y.setShowPreview),oe=Y.saveAsFile,ce=function(e){return e.lightbar.cycles},ie=function(e){return e.lightbar.selectedCycle},ue=function(e){return e.lightbar.selectedLight},se=function(e){return e.lightbar.showPreview},de=Q.reducer,me=Object(h.a)((function(e){return{menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},previewButton:{color:"#ffffff",borderColor:"#ffffff"}}}));var he=function(){var e=me(),t=Object(B.h)(),n=Object(a.useState)(!1),l=Object(i.a)(n,2),o=l[0],c=l[1],s=r.a.useState(null),d=Object(i.a)(s,2),m=d[0],h=d[1],f=Object(u.b)(),g=function(e){return function(){null!==e&&f(oe(e)),h(null)}};return Object(a.useEffect)((function(){t.pathname.indexOf("lightbar")>0?c(!0):c(!1)}),[t]),r.a.createElement(I.a,{position:"static"},r.a.createElement(D.a,null,r.a.createElement(P.a,{edge:"start",color:"inherit","aria-label":"Menu"},r.a.createElement(M.a,null)),r.a.createElement(b.a,{variant:"h6",className:e.title},"DandR Electronic Lighbar Configurator"),o&&r.a.createElement(r.a.Fragment,null,r.a.createElement(E.a,{className:e.previewButton,onClick:function(){return f(le(!0))},startIcon:r.a.createElement(V.a,null),variant:"outlined"},"Preview"),r.a.createElement(P.a,{"aria-label":"Download",color:"inherit",edge:"end",onClick:function(e){return h(e.currentTarget)}},r.a.createElement(F.a,null))),r.a.createElement(A.a,{id:"simple-menu",anchorEl:m,keepMounted:!0,open:Boolean(m),onClose:g()},r.a.createElement(W.a,{onClick:g(!1)},"Export BIN"),r.a.createElement(W.a,{onClick:g(!0)},"Export JSON"))))},fe=(n(135),n(24)),ge=Object(h.a)({root:{display:"flex",flexDirection:"row",height:function(e){return e.width?"auto":200},justifyContent:"center",marginLeft:10,maxWidth:750,minWidth:function(e){return e.width||500},width:function(e){return e.width||"100%"}}});var be=function(e){var t=e.lights,n=void 0===t?[]:t,l=e.onClick,o=e.selectedLight,c=(e.title,e.width),i=ge({width:c}),u=Object(a.useRef)();if(!n.length)return null;var s=n.slice(0,(n.length-6)/2),d=n.slice(s.length+3,-3),m=114+45*s.length,h=(c||m)/m,f=s.length*(45*h),g=5*h,b=function(e){return function(){return l&&l(e)}},v=function(e){return o===e?"red":null},E=function(e){var t=e.r,n=e.g,a=e.b;return"#".concat(X({r:t,g:n,b:a}))};return r.a.createElement("div",{ref:u,className:i.root},r.a.createElement(fe.Stage,{width:m*h,height:200*h},r.a.createElement(fe.Layer,{x:57*h},s.map((function(e,t){return r.a.createElement(fe.Rect,{key:t,x:45*t*h,y:20*h,width:40*h,height:24*h,fill:E(e.color),shadowBlur:g,cornerRadius:5,onClick:b(t),stroke:v(t)})}))),r.a.createElement(fe.Layer,{rotation:-180,x:114*h+f,y:184*h},r.a.createElement(fe.Rect,{x:58*h,y:44*h,width:40*h,height:24*h,fill:E(n[s.length+2].color),shadowBlur:g,rotation:135,cornerRadius:5,onClick:b(s.length+2),stroke:v(s.length+2)}),r.a.createElement(fe.Rect,{x:30*h,y:73*h,width:40*h,height:24*h,fill:E(n[s.length+1].color),shadowBlur:g,rotation:90,cornerRadius:5,onClick:b(s.length+1),stroke:v(s.length+1)}),r.a.createElement(fe.Rect,{x:30*h,y:113*h,width:40*h,height:24*h,fill:E(n[s.length].color),shadowBlur:g,rotation:45,cornerRadius:5,onClick:b(s.length),stroke:v(s.length)})),r.a.createElement(fe.Layer,{x:57*h},d.map((function(e,t){return r.a.createElement(fe.Rect,{key:t,x:45*t*h,y:140*h,width:40*h,height:24*h,fill:E(n[n.length-4-t].color),shadowBlur:g,cornerRadius:5,onClick:b(n.length-4-t),stroke:v(n.length-4-t)})}))),r.a.createElement(fe.Layer,null,r.a.createElement(fe.Rect,{x:55*h,y:44*h,width:40*h,height:24*h,fill:E(n[n.length-1].color),shadowBlur:g,rotation:135,cornerRadius:5,onClick:b(n.length-1),stroke:v(n.length-1)}),r.a.createElement(fe.Rect,{x:27*h,y:73*h,width:40*h,height:24*h,fill:E(n[n.length-2].color),shadowBlur:g,rotation:90,cornerRadius:5,onClick:b(n.length-2),stroke:v(n.length-2)}),r.a.createElement(fe.Rect,{x:27*h,y:113*h,width:40*h,height:24*h,fill:E(n[n.length-3].color),shadowBlur:g,rotation:45,cornerRadius:5,onClick:b(n.length-3),stroke:v(n.length-3)}))))},ve=n(42),Ee=n(467),pe=n(475),ye=n(468),we=n(469),Ce=Object(h.a)({});var je=function(){Ce();var e=Object(ve.a)(),t=Object(a.useState)(!1),n=Object(i.a)(t,2),l=(n[0],n[1],Object(Ee.a)(e.breakpoints.down("sm"))),o=Object(u.c)(se),c=Object(u.c)(ce),s=Object(u.b)(),d=Object(a.useState)(0),m=Object(i.a)(d,2),h=m[0],f=m[1];return Object(a.useEffect)((function(){var e=setInterval((function(){f(h+1<c.length?h+1:0)}),50);return function(){return clearInterval(e)}})),r.a.createElement("div",null,r.a.createElement(pe.a,{fullScreen:l,open:o,onClose:function(){return s(le(!1))},"aria-labelledby":"responsive-dialog-title"},r.a.createElement(ye.a,{id:"responsive-dialog-title"},"Lightbar Preview"),r.a.createElement(we.a,null,c&&c[h]&&r.a.createElement(be,{lights:c[h].lights}))))},Oe=n(93),xe=n(470),ke=n(473),Se=n(97),Le=n(189),Ne=Object(h.a)({root:{position:"fixed",margin:"-50px 40px",zIndex:2}}),Be=function(e){var t=e.value,n=e.onClick,a=e.onChange,l=Ne();return r.a.createElement("div",{className:l.root},r.a.createElement("div",{style:{position:"absolute",zIndex:"2"}},r.a.createElement("div",{style:{position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"},onClick:n}),r.a.createElement(Le.ChromePicker,{color:t,onChange:a})))},Re=Object(h.a)({root:{minWidth:400,maxWidth:500},card:{},cardHeader:{color:"#ffffff",backgroundColor:Se.a[500]},cardContent:{},colorInfo:{display:"flex",flexDirection:"row",justifyContent:"space-between"},colorView:{width:25,height:25,backgroundColor:function(e){return"rgb(".concat(Object.values(e.color),")")}}});var _e=function(e){var t,n,l,o=e.config,c=e.onChange,u=Re({color:(null===o||void 0===o?void 0:o.color)||{r:255,g:255,b:255}}),s=Object(a.useState)(!1),d=Object(i.a)(s,2),m=d[0],h=d[1],v=function(e){var t=e.target;console.log(t.value),c({color:Object(G.a)({},null===o||void 0===o?void 0:o.color,Object(Oe.a)({},t.name,+t.value>=0&&+t.value<=255?t.value.trim():null===o||void 0===o?void 0:o.color[t.name]))})},p=function(){return h(!m)};return r.a.createElement("div",{className:u.root},r.a.createElement(f.a,{className:u.card},r.a.createElement(xe.a,{className:u.cardHeader,title:"Set the color"}),r.a.createElement(g.a,{className:u.cardContent},o?r.a.createElement("div",{className:u.colorInfo},r.a.createElement(ke.a,{label:"Red",inputProps:{max:255,min:0},name:"r",onChange:v,size:"small",type:"number",value:(null===o||void 0===o||null===(t=o.color)||void 0===t?void 0:t.r)||255,variant:"outlined"}),r.a.createElement(ke.a,{label:"Green",inputProps:{max:255,min:0},name:"g",onChange:v,size:"small",type:"number",value:(null===o||void 0===o||null===(n=o.color)||void 0===n?void 0:n.g)||255,variant:"outlined"}),r.a.createElement(ke.a,{label:"Blue",inputProps:{max:255,min:0},name:"b",onChange:v,size:"small",type:"number",value:(null===o||void 0===o||null===(l=o.color)||void 0===l?void 0:l.b)||255,variant:"outlined"}),r.a.createElement(E.a,{color:"default",onClick:p,variant:"contained"},r.a.createElement("span",{className:u.colorView})),m&&r.a.createElement(Be,{value:null===o||void 0===o?void 0:o.color,onClick:p,onChange:function(e){return c({color:delete e.rgb.a&&e.rgb})}})):r.a.createElement(b.a,{variant:"h6"},"Please select a light module from the lightbar preview to set the color."))))},Ie=n(191),De=n.n(Ie),Pe=n(471),Ae=n(190),We=n.n(Ae),He=Object(h.a)({root:{width:"100%",overflow:"auto",maxHeight:400},item:{height:75}}),Me=function(e){var t=e.className,n=e.id,a=e.lights,l=e.onClick,o=e.onDelete,c=e.selected;return r.a.createElement(p.a,{alignItems:"center",className:t,selected:c,onClick:l,button:!0},r.a.createElement(y.a,{primary:"Cycle #".concat(n+1)}),r.a.createElement(be,{lights:a,width:10*(a.length-6)}),r.a.createElement(Pe.a,null,r.a.createElement(P.a,{"arial-label":"delete",edge:"end",onClick:o},r.a.createElement(We.a,null))))};var ze=function(){var e=He(),t=Object(u.c)(ce),n=Object(u.c)(ie),a=Object(u.b)(),l=function(e){return function(){return a(ae(e))}};return r.a.createElement(w.a,{className:e.root},t.map((function(t,o){return r.a.createElement(Me,{className:e.item,key:o,id:o,lights:t.lights,onClick:(c=o,function(){return a(ee(c))}),onDelete:l(o),selected:o===n});var c})))},Fe=Object(h.a)({action:{color:"#ffffff"},card:{},cardHeader:{color:"#ffffff",backgroundColor:Se.a[500]},root:{}});var Te=function(){var e=Fe(),t=Object(u.b)();return r.a.createElement("div",{className:e.root},r.a.createElement(f.a,{className:e.card},r.a.createElement(xe.a,{className:e.cardHeader,action:r.a.createElement(P.a,{"arial-label":"Add a new cycle",className:e.action,onClick:function(){return t(ne())}},r.a.createElement(De.a,null)),title:"Cycles"}),r.a.createElement(g.a,null,r.a.createElement(ze,null))))},Ve=Object(h.a)({root:{display:"flex",flexDirection:"row",marginTop:20,padding:"0 16px",alignContent:"space-between",flexWrap:function(e){return e.mqMatches?null:"wrap-reverse"}},cycles:{minWidth:400,flexGrow:1,bottom:0},details:{flexGrow:2,display:"flex",flexDirection:"column",alignItems:"center",alignContent:"stretch",padding:"0 10px"}});var Ge=function(){var e,t,n=Object(Ee.a)("(min-width: 800px)"),l=Ve({mqMatches:n}),o=Object(u.b)(),c=Object(u.c)(x),i=Object(u.c)(ie),s=Object(u.c)(ue),d=Object(u.c)(ce),m=Object(u.c)(x),h=Object(u.c)(se);return Object(a.useEffect)((function(){o(Z(c))}),[]),Object(a.useEffect)((function(){m&&o(ne())}),[m]),c?(console.log(i),r.a.createElement(r.a.Fragment,null,!!m&&r.a.createElement("div",{className:l.root},r.a.createElement("div",{className:l.cycles},r.a.createElement(Te,null)),r.a.createElement("div",{className:l.details},r.a.createElement(be,{lights:null===(e=d[i])||void 0===e?void 0:e.lights,onClick:function(e){return o(te(e))},selectedLight:s,title:c.model}),r.a.createElement(_e,{config:null===(t=d[i])||void 0===t?void 0:t.lights[s],onChange:function(e){return o(re(e))}}))),h&&r.a.createElement(je,null))):r.a.createElement(B.a,{to:"/"})},Je=Object(h.a)((function(e){return{root:{}}}));var Ue=function(){var e=Je();return r.a.createElement("div",{className:e.root},r.a.createElement(he,null),r.a.createElement(B.d,null,r.a.createElement(B.b,{path:"/lightbar"},r.a.createElement(Ge,null)),r.a.createElement(B.b,{path:"/"},r.a.createElement(_,null))))},qe=Object(s.a)({reducer:{lightbarSelector:k,lightbar:de}}),Xe=n(192),$e=Object(Xe.a)();Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ke=n(58);o.a.render(r.a.createElement(c.a,{theme:$e},r.a.createElement(u.a,{store:qe},r.a.createElement(Ke.a,{basename:"/"},r.a.createElement(Ue,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[201,1,2]]]);
//# sourceMappingURL=main.65b9b020.chunk.js.map